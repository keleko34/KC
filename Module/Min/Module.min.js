var CreateModule=function(){return function(p,q){function c(){var a,b=c.childModules(),f=Object.keys(b),d;for(a=0;a<f.length;a+=1)d=b[f[a]],void 0!==d&&d.apply(this,arguments)}var z=function(){return function(){function a(b){var c=a.isConstructor(),e=a.isFunction(),d=a.value(),f=a.isModuleScoped(),g=a.module(),h,k;h=a["type"+t](b);if(void 0===b||e||c)return e||c?c?(g=Array.prototype.slice.call(arguments),g.unshift(0),new (d.bind.apply(d,g))):f?d.apply(g,arguments):d.apply(d,arguments):d;if(h.isValid)for(d=
a.propertyName(),c=a.sharedModules(),e=Object.keys(c),f={stopPropagation:function(){this._stopPropagation=!0},value:b,propertyName:d,_stopPropagation:!1,changeOrigin:g},f.stopPropagation.bind(f),a.value(h.value),h=0;h<e.length&&!f._stopPropagation;h+=1)void 0!==c[e[h]]&&(k=c[e[h]][d],k.isModuleScoped()?k.onChange().call(k.module(),f):k.onChange().call(k.onChange(),f));return g}var b="",c,d,h,e=!1,g=!1,k=!1,l=!0,m=!0,n=function(){},p,x={},q=!1,r=!0,y={},t="string",w="string number object boolean function float array class".split(" "),
u=function(){};a.propertyName=function(a){if(void 0===a)return b;b=a.toString();return this};a.value=function(a){if(void 0===a)return c;c=a;return this};a.module=function(a){if(void 0===a)return d;d=a;return this};a.moduleName=function(a){if(void 0===a)return h;h=a.toString();return this};a.isPrivate=function(a){if(void 0===a)return e;e=!!a;return this};a.isFunction=function(a){if(void 0===a)return g;g=!!a;return this};a.configurable=function(a){if(void 0===a)return k;k=!!a;return this};a.enumerable=
function(a){if(void 0===a)return l;l=!!a;return this};a.writable=function(a){if(void 0===a)return m;m=!!a;return this};a.onChange=function(a){if(void 0===a)return n;n="function"===typeof a?a:function(){};return this};a.loadedFrom=function(a){if(void 0===a)return p;p=a;return this};a.sharedModules=function(a,b){if(void 0===a)return x;if(void 0===b)return x=a,this;x[a]=b;return this};a.isConstructor=function(a){if(void 0===a)return q;q=!!a;return this};a.isModuleScoped=function(a){if(void 0===a)return r;
r=!!a;return this};a.type=function(b){if(void 0===b)return t;t=-1<w.indexOf(b)?v:t;return a};a.typeClass=function(b){if(void 0===b)return u;u="function"===typeof b?b:u;return a};a.prototype=function(b,c){if(void 0===b)return y;if(void 0===c)return y=b,a.value().prototype=b,this;y[b.toString()]=c;a.value().prototype[b.toString()]=c;return this};a.typestring=function(a){return{isValid:"string"===typeof a||"[Object object]"!==a.toString(),value:a.toString()}};a.typenumber=function(a){return{isValid:"number"===
typeof a||!isNaN(parseInt(a,10)),value:parseInt(a,10)}};a.typeobject=function(a){return{isValid:"object"===typeof a&&a.constructor.toString()===Object.toString(),value:a}};a.typeboolean=function(a){return{isValid:"boolean"===typeof a||!0,value:!!a}};a.typefunction=function(a){return{isValid:"function"===typeof a,value:a}};a.typefloat=function(a){return{isValid:"number"===typeof a||!isNaN(parseFloat(a)),value:parseFloat(a)}};a.typearray=function(a){return{isValid:"object"===typeof a&&a.constructor.toString()===
Array.toString(),value:a}};a.typeclass=function(a){return{isValid:a.toString()===u.toString(),value:a}};return a}}(),r="",w="",l={},m={},n={};c.setModuleName=function(a){if(void 0===a)return r;r=a;return c};c.setModule=function(a){if(void 0===a)return w;w=a;var b={};b.moduleName=c.setModuleName;b.parentModules=c.parentModules;b.createGetSetFunction=c.createGetSetFunction;Object.defineProperty(a,"_ModuleLoader",{value:b,writable:!1,enumerable:!1,configurable:!1});return c};c.parentModules=function(a,
b){if(void 0===a)return l;if(void 0===b)return l=a,c;l[a]=b;return c};c.childModules=function(a,b){if(void 0===a)return m;if(void 0===b)return m=a,c;m[a]=b;return c};c.setLoadGroup=function(a,b){if(void 0===a)return n;if(void 0===b)return n=a,c;b.constructor===Object&&(b=Object.keys(b).map(function(a,c){return b[a]}));n[a]=b.constructor===Array?b.splice(0):[];return c};c.convertToOOP=function(a){var b=Object.keys(a),c,d,h={};for(c=0;c<b.length;c+=1)d=a[b[c]],"function"===typeof d&&(h[b[c]]=d());return h};
c.createGetSetFunction=function(a){a.module="object"!==typeof a.module?c.setModule():a.module;a.moduleName="string"!==typeof a.moduleName?a.module._ModuleLoader.moduleName():a.moduleName;var b=z();b.module(a.module);b.moduleName(a.moduleName);b.propertyName(a.propertyName);b.value(a.value);b.isPrivate(a.isPrivate);b.isFunction(a.isFunction);b.writable(a.writable);b.configurable(a.configurable);b.enumerable(a.enumerable);b.onChange(a.onChange);b.loadedFrom(a.loadedFrom);b.sharedModules(a.sharedModules);
b.sharedModules(a.moduleName,a.module);b.isConstructor(a.isConstructor);b.isModuleScoped(a.isModuleScoped);b.type(a.type);b.typeClass(a.typeClass);b.isConstructor()&&b.prototype(a.prototype);Object.defineProperty(b.module(),b.propertyName(),{get:function(){return b},set:function(a){b.writable()&&b(a)},configurable:!0,enumerable:b.enumerable()});return c};c.loadProperty=function(a,b,f){a[f].sharedModules(b._ModuleLoader.moduleName(),b);var d=c.convertToOOP(a[f]),h,e;d.module=void 0;d.moduleName=void 0;
d.onChange=void 0;d.loadedFrom=a._ModuleLoader.moduleName();b._ModuleLoader.createGetSetFunction(d);a=b[f];b=a.sharedModules();d=Object.keys(b);for(h=0;h<d.length;h+=1)void 0!==b[d[h]]&&(e=b[d[h]][f],e.sharedModules=a.sharedModules,e.propertyName=a.propertyName,e.isPrivate=a.isPrivate,e.isFunction=a.isFunction,e.enumerable=a.enumerable,e.writable=a.writable,e.value=a.value,e.prototype=a.prototype);return c};c.inheritProperty=function(a,b,f){a=a[f];var d=b[f];b=d.sharedModules();var h=Object.keys(b),
e,g={propertyName:f,stopPropagation:function(){this._stopPropagation=!0},value:void 0,_stopPropagation:!1,changeOrigin:void 0};g.stopPropagation.bind(g);d.configurable()||a.isFunction()||a.isConstructor()||a.value(d.value());for(d=0;d<h.length;d+=1)e=h[d],void 0!==b[h[d]]&&(a.sharedModules(e,b[e]),e=b[h[d]][f],e.sharedModules=a.sharedModules,e.propertyName=a.propertyName,e.isPrivate=a.isPrivate,e.isFunction=a.isFunction,e.enumerable=a.enumerable,e.writable=a.writable,e.value=a.value,e.prototype=a.prototype,
Object.defineProperty(b[h[d]],f,{enumerable:a.enumerable()}),e.isFunction()||e.isConstructor()||(g.value=a.value(),g.changeOrigin=a.module(),e.isModuleScoped()?e.onChange().call(e.module(),g):e.onChange().call(e.onChange(),g)));return c};c.loadProperties=function(a,b){var f=Object.keys(a),d=b._ModuleLoader.parentModules(),h=Object.keys(d),e,g;for(e=0;e<f.length;e+=1)g=f[e],void 0===b[g]?c.loadProperty(a,b,g):c.inheritProperty(b,a,g);for(e=0;e<h.length;e+=1)g=d[h[e]],void 0!==g&&c.loadProperties(a,
g);return c};c.unloadProperties=function(a,b){var f=b._ModuleLoader.moduleName(),d=a._ModuleLoader.parentModules(),h=Object.keys(d),e=Object.keys(b),g,k;for(g=0;g<e.length;g+=1)k=e[g],a[k].loadedFrom()===f&&(a[k].sharedModules()[a._ModuleLoader.moduleName()]=void 0,delete a[k]);for(g=0;g<h.length;g+=1)k=d[h[g]],void 0!==k&&c.unloadProperties(k,b);return c};c.loadModule=function(a){var b=c.setModule();c.loadProperties(a,b);a._ModuleLoader.parentModules(c.setModuleName(),b);c.childModules(a._ModuleLoader.moduleName(),
a);return c};c.unloadModule=function(a){var b,f,d=c.setModule();"string"===typeof a?(b=a,f=c.childModules()[a]):(f=a,b=a._ModuleLoader.moduleName());void 0!==f&&(c.unloadProperties(d,f),f._ModuleLoader.parentModules()[c.setModuleName()]=void 0,c.childModules()[b]=void 0);return c};c.getLoadGroup=function(a){var b=c.setLoadGroup()[a],f,d;return function(){for(f=0;f<b.length;f+=1)d=c.childModules()[b[f]],void 0!==d&&d.apply(this,arguments)}};void 0!==q&&c.setModule(q);void 0!==p&&c.setModuleName(p);
return c}}();
